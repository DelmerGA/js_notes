<!DOCTYPE html>
<html>
<head>
	<script>
	/**
	* Waits for window ot load
	*/
	window.onload = function(){

	 /**
		*	Begin Demo 1
    */

		/**
		* Grab bubbles from DOM.
		*
		* @param {bubbles} The elements with the '.bubble' class
		*/
		var bubbles = document.getElementsByClassName('bubble')
		
		for(var i = 0; i < bubbles.length; i++){
			/**
			* Attach click events to bubble elements
			*
			* @this {bubble} An element with the '.bubble' class
			*/
			bubbles[i].onclick = function(event){
				if(this == event.target){
					alert('I was clicked!');

					this.style.backgroundColor = 'red';
				} else {
    			alert('One of my inner divs were clicked!');

    			this.style.backgroundColor = 'red';
    			this.children[0].style.backgroundColor = 'purple';
    		}
    	};
    }


  	/**
		* Reset the bubble example.
		*
		* @this {Circle} An element with the '.bubble' class
		*/
    var reset = function(){
    	for(var i = 0; i < bubbles.length; i++){
    		bubbles[i].style.backgroundColor = 'blue';
    	}
    };

  	/**
		* Assign reset to click of 'resetBubbles' button.
		*/
    document.getElementById('resetBubbles').onclick = reset;

    document.getElementById('showExample1').onclick = function(event){
    	var codeEx = document.getElementById('codeEx1');
    	codeEx.classList.toggle('hidden');
    };

    /**
		*	End Demo 1
    */


    /**
		*	Begin Demo 2
    */

    document.getElementById('showExample2').onclick = function(){
    	document.getElementById('example2Code').classList.toggle('hidden');
    };

    var elements = document.getElementsByClassName('target');

    for(var i = 0; i < elements.length; i++) {
    	elements[i].onclick = function(event) {
    		if (event.target == event.currentTarget){
    			event.currentTarget.style.backgroundColor = 'red';
    		} else {
    			event.currentTarget.style.backgroundColor = "purple";
    		}
    		setTimeout(targetReset, 1000);
    	};
    }

    var targetReset = function() {
    	for(var i = 0; i < bubbles.length; i++) {
    		elements[i].style.backgroundColor = 'blue';
    	}
    };


    document.getElementById("resetTargets").onclick = targetReset;





  }
	</script>
	<script src="http://code.jquery.com/jquery.min.js"></script>
	<link href="http://getbootstrap.com/dist/css/bootstrap.css" rel="stylesheet" type="text/css" />
	<script src="http://getbootstrap.com/dist/js/bootstrap.js"></script>
	<style>
		.bubble{
	        background-color: blue; 
	        padding: 20px;
	        border: solid 5px white;
	    }  
	
		.hidden{
			visibility: hidden;
		}
		.spacer {
			background-color: #fcfcfc;
		}


	   </style>

	   <meta charset=utf-8 />
	   <title>JS Notes</title>
	 </head>

	 <body>

	 	<!-- NEW STUFF -->	
		<div class="jumbotron">
			<div class="container">
				<h1 class="heading">Some JS Notes</h1>
			</div>
		</div>

		<!-- NEW STUFF -->

		<!-- Bubble Start -->
		<div class="container">


			<!-- Bubble Expo -->
			<div class="row">
				<div class="col-sm-6">
					<h2> Event bubbling! </h2>

					<p>
						When an event occurs on an element
						the default behavior of javascript is
						to trigger that event through each of the parent nodes in DOM until it gets to the window. 
					</p>

					<p>
						This behavior is caslled event bubbling.
					</p>
				</div>

				<!-- Bubble Demo -->
				<div class="bubble col-xs-6">
					<div class="bubble col-xs-12">
						<div class="bubble col-xs-12">
							<div class="bubble col-xs-12">
							</div>
						</div>
					</div>
				</div>

			</div>

			<!-- Bubble Buttons -->
			<div class="row">
				<div class="col-sm-6 col-sm-offset-6">
					<button id="resetBubbles" class="btn btn-default">
						RESET
					</button>
					<button id="showExample1" class="btn btn-info">
						Show Code
					</button>
				</div>
			</div>

		</div>

		<!-- Bubble Example -->
		<div id="codeEx1" class="hidden">
			* Slightly different from the above example.

			<!-- Bubble Style -->
			<pre>
&lt;style&gt;
	.bubble{
	    position: inherit;
	    background-color: blue; 
	    padding: 20px;
	    border: solid 5px white;
	}
&lt;/style&gt;
			</pre>

			<!-- Bubble Divs -->
			<pre>
&lt;div class="bubble"&gt;
    &lt;div class="bubble"&gt;
        &lt;div class="bubble"&gt;
            &lt;div class="bubble"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
			</pre>

			<!-- Show Bubble Style -->
			<div class="container">
				<style>
					.bubble-ish{
						position: inherit;
						background-color: blue; 
						padding: 20px;
						border: solid 5px white;
					}
				</style>


				<div class="bubble-ish">
					<div class="bubble-ish">
						<div class="bubbl-ish">
							<div class="bubble-ish">
		            <div class="bubble-ish">
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
		  </div>

		  <!-- Bubble Script -->
		  <pre>
&lt;script&gt;
var bubbles = document.getElementsByClassName("bubble")
for( var i = 0; i < bubbles.length; i++) {
    bubbles[i].onclick = function(event) {
        event.target.style.backgroundColor = "red"
    }
}
&lt;/script&gt;
			</pre>

			<!-- Bubble Example -->
			<div class="container">
				<div class="bubble-ish bubble-ex">
					<div class="bubble-ish bubble-ex">
						<div class="bubble-ish bubble-ex">
							<div class="bubble-ish bubble-ex">
							</div>
						</div>
					</div>
				</div>


				<script>

				var bubbles = document.getElementsByClassName("bubble-ex")
				for( var i = 0; i < bubbles.length; i++) {
					bubbles[i].onclick = function(event) {
			        event.target.style.backgroundColor = "red";
			    }
			  }
				</script>
			</div>
		</div>
		<!-- Bubble End -->

		<!-- NEW STUFF -->
		<div class="jumbotron spacer">
		</div>
		<!-- NEW STUFF -->

		<div class="container">
			<div class="row">
				<div class="col-sm-6">
					<h1> Event Target/Current Target </h1>

					<p>
						In javascript we also have
						<code>target</code>
						and <code>currentTarget.</code>
					</p>
				</div>


				<div class="col-sm-6">

					<style>
					.target{
						background: blue;
						padding:20px;
						border: solid 5px white;
					}
					</style>

					<div class="target">
						<div class="target">
							<div class="target">
								<div class="target">
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>

		<div class="row">
			<div class="col-sm-6 col-sm-offset-6">
				<button id="resetTargets" class="btn btn-default">
					RESET
				</button>
				<button id="showExample2" class="btn btn-info">
					Show Code
				</button>
			</div>
		</div>
		<div class="row hidden" id="example2Code">
			<pre>
				var elements = document.getElementsByClassName("bubble")

				for( var i = 0; i < elements.length; i++) {
					elements[i].onclick = function(event) {
						if (event.target == event.currentTarget){
							event.currentTarget.style.backgroundColor = "red"
						} else{
							event.currentTarget.style.backgroundColor = "purple"
						}
					}
				}

			</pre>
		</div>
	</div>


	<!-- NEW STUFF -->
	<div class="jumbotron spacer">
	</div>
	<!-- NEW STUFF -->


	<div class="container">
		<div class="row">
			<div class="col-sm-6">
				<h2> Manipulating Form Data </h2>

				If you have a form you want grab
				input from that element on submit 
				it will take a some work.
				<div class="row">
					<i>1.) You have to grab the input elements.</i>
				</div>
				<div class="row">
					<i>2.) You have to do something with with the input.</i>
				</div>
				<div class="row">
					<i>3.) You have to clear the input fields.</i>
				</div>
			</div>
			<div class="col-sm-6">
				<form id="myForm" class="form-horizontal" role="form">
					<div class="form-group">
						<label for="something_title">Title</label>
						<input type="text" name="something[title]"class="form-control" id="something_title" placeholder="Enter Title">
					</div>
					<div class="form-group">
						<label for="something_description">Description</label>
						<textarea class="form-control" name="something[description]" id="something_description" placeholder="Enter Description"></textarea>
					</div>

					<div class="form-group">
						<div class="col-sm-10">
				      <button type="submit" class="btn btn-default">Sign in</button>
				    </div>
				  </div>
				</form>
				<div id="formResult">
				</div>
				<script>
					var getFormFields = function(event){
						event.preventDefault()

						var data = new Object();
						var myTemp = "<pre>";
						for(var i = 0; i < event.target.length; i++) {
							if("" != event.target[i].name ){
								data[event.target[i].name] = event.target[i].value;

								myTemp +=  "" + event.target[i].name + 
								" = " + event.target[i].value +  "\n";

								event.target[i].value = "";
							}
						};

						myTemp += "</pre>"

						document.getElementById("formResult").innerHTML += myTemp;
						var data = JSON.stringify(data);
					}
					document.getElementById("myForm").onsubmit = getFormFields;

				</script>
			</div>
		</div>	
	</div>

	<div class="container">
		<pre>
					var getFormFields = function(event){
						event.preventDefault()

						var data = new Object();
						var myTemp = "&lt;pre>";
						for(var i = 0; i < event.target.length; i++) {
							if("" != event.target[i].name ){
								data[event.target[i].name] = event.target[i].value;

								myTemp +=  "" + event.target[i].name + 
								" = " + event.target[i].value +  "\n";

								event.target[i].value = "";
							}
						};

						myTemp += "&lt;/pre>"

						document.getElementById("formResult").innerHTML += myTemp;
						var data = JSON.stringify(data);
					}
					document.getElementById("myForm").onsubmit = getFormFields;

		</pre>
	</div>
<!-- NEW STUFF -->

<div class="jumbotron spacer">
</div>

<!-- NEW STUFF -->
<style>
	.box {
		background-color: #FFA700;
		height:100px;
		margin:1px;
	}
	#stack{
		overflow-y:scroll;
		height:300px;
	}
</style>

		<div class="container myEvEx">
			<h2>The Event Loop</h2>
			<div class="row">
				<div class="col-sm-9">
					<div class="row">
						<div class="col-sm-3 box">
							element 1
						</div>	
						<div class="col-sm-3 box">
							element 2
						</div>
						<div class="col-sm-3 box">
							element 3
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3 box">
							element 4
						</div>	
						<div class="col-sm-3 box">
							element 5
						</div>
						<div class="col-sm-3 box">
							element 6
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3 box">
							element 7
						</div>	
						<div class="col-sm-3 box">
							element 8
						</div>
						<div class="col-sm-3 box">
							element 9
						</div>
					</div>
				</div>
				<div  class="col-sm-3">
					<h2>Stack History</h2>
					<div id="stack">
					</div>
				</div>
			</div>
			<div id="queue" class="row">
				<h2>Event Queue</h2>
			</div>

			<script>

				boxes = document.getElementsByClassName("box");
				queue = document.getElementById("queue")
				stack = document.getElementById("stack")
				appendEl = function(type, content, target, att) {
						el = document.createElement(type);
						el.innerHTML = content;
						if(att != undefined){
							for (var i = 0; i < att.length; i++) {
								el.style[att[i][0]] = att[i][1];
							};
						}
						target.appendChild(el)
						target.scrollTop = target.scrollHeight;
					}

					for (var i = 0; i < boxes.length; i++) {

						boxes[i].onclick = function(e){
							var green = 255;
							_this = this;

							cont = "Event fired for " + this.innerHTML;
							style = [	["backgroundColor", "rgb(255,167,0)"],
											["color", "white"]];
							appendEl("pre", cont, stack, style);

							cpy = _this.cloneNode(true);
							queue.appendChild(cpy);

							loop = function(green, _this, cpy){
								cont = "Running Loop for " + cpy.innerHTML
								appendEl("div", cont, stack);
								queue.appendChild(cpy);

								if(green >= 167){

									_this.style.backgroundColor = "rgb(255,"+green+",0)";
									green = green - 50;
									setTimeout(function(){
										cont = "Running setTimeout for" + cpy.innerHTML;
										appendEl("div", cont, stack);
										loop(green,_this,cpy)
									}, 500 + queue.childNodes.length * 500);
								} else {
									cont = "Loop done for " + _this.innerHTML;
									style=[["backgroundColor", "rgb(255,50,0)"],
									["color", "white"],
									["padding","20px"]];
									appendEl("div", cont, stack, style);

									_this.style.backgroundColor = "rgb(255,167,0)";
									queue.removeChild(cpy);
								}
							}

							loop(green, _this, cpy)
						}
					};

			</script>
		</div>

<!-- NEW STUFF -->

<div class="jumbotron spacer">
</div>

<!-- NEW STUFF -->

	</body>
</html>